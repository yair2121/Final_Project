{"ast":null,"code":"'use strict';const inherits=require('inherits');const Buffer=require('safer-buffer').Buffer;const Node=require('../base/node');// Import DER constants\nconst der=require('../constants/der');function DEREncoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;// Construct base tree\nthis.tree=new DERNode();this.tree._init(entity.body);}module.exports=DEREncoder;DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join();};// Tree methods\nfunction DERNode(parent){Node.call(this,'der',parent);}inherits(DERNode,Node);DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){const encodedTag=encodeTag(tag,primitive,cls,this.reporter);// Short form\nif(content.length<0x80){const header=Buffer.alloc(2);header[0]=encodedTag;header[1]=content.length;return this._createEncoderBuffer([header,content]);}// Long form\n// Count octets required to store length\nlet lenOctets=1;for(let i=content.length;i>=0x100;i>>=8)lenOctets++;const header=Buffer.alloc(1+1+lenOctets);header[0]=encodedTag;header[1]=0x80|lenOctets;for(let i=1+lenOctets,j=content.length;j>0;i--,j>>=8)header[i]=j&0xff;return this._createEncoderBuffer([header,content]);};DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==='bitstr'){return this._createEncoderBuffer([str.unused|0,str.data]);}else if(tag==='bmpstr'){const buf=Buffer.alloc(str.length*2);for(let i=0;i<str.length;i++){buf.writeUInt16BE(str.charCodeAt(i),i*2);}return this._createEncoderBuffer(buf);}else if(tag==='numstr'){if(!this._isNumstr(str)){return this.reporter.error('Encoding of string type: numstr supports '+'only digits and space');}return this._createEncoderBuffer(str);}else if(tag==='printstr'){if(!this._isPrintstr(str)){return this.reporter.error('Encoding of string type: printstr supports '+'only latin upper and lower case letters, '+'digits, space, apostrophe, left and rigth '+'parenthesis, plus sign, comma, hyphen, '+'dot, slash, colon, equal sign, '+'question mark');}return this._createEncoderBuffer(str);}else if(/str$/.test(tag)){return this._createEncoderBuffer(str);}else if(tag==='objDesc'){return this._createEncoderBuffer(str);}else{return this.reporter.error('Encoding of string type: '+tag+' unsupported');}};DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==='string'){if(!values)return this.reporter.error('string objid given, but no values map found');if(!values.hasOwnProperty(id))return this.reporter.error('objid not found in values map');id=values[id].split(/[\\s.]+/g);for(let i=0;i<id.length;i++)id[i]|=0;}else if(Array.isArray(id)){id=id.slice();for(let i=0;i<id.length;i++)id[i]|=0;}if(!Array.isArray(id)){return this.reporter.error('objid() should be either array or string, '+'got: '+JSON.stringify(id));}if(!relative){if(id[1]>=40)return this.reporter.error('Second objid identifier OOB');id.splice(0,2,id[0]*40+id[1]);}// Count number of octets\nlet size=0;for(let i=0;i<id.length;i++){let ident=id[i];for(size++;ident>=0x80;ident>>=7)size++;}const objid=Buffer.alloc(size);let offset=objid.length-1;for(let i=id.length-1;i>=0;i--){let ident=id[i];objid[offset--]=ident&0x7f;while((ident>>=7)>0)objid[offset--]=0x80|ident&0x7f;}return this._createEncoderBuffer(objid);};function two(num){if(num<10)return'0'+num;else return num;}DERNode.prototype._encodeTime=function encodeTime(time,tag){let str;const date=new Date(time);if(tag==='gentime'){str=[two(date.getUTCFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else if(tag==='utctime'){str=[two(date.getUTCFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else{this.reporter.error('Encoding '+tag+' time is not supported yet');}return this._encodeStr(str,'octstr');};DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer('');};DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==='string'){if(!values)return this.reporter.error('String int or enum given, but no values map');if(!values.hasOwnProperty(num)){return this.reporter.error('Values map doesn\\'t contain: '+JSON.stringify(num));}num=values[num];}// Bignum, assume big endian\nif(typeof num!=='number'&&!Buffer.isBuffer(num)){const numArray=num.toArray();if(!num.sign&&numArray[0]&0x80){numArray.unshift(0);}num=Buffer.from(numArray);}if(Buffer.isBuffer(num)){let size=num.length;if(num.length===0)size++;const out=Buffer.alloc(size);num.copy(out);if(num.length===0)out[0]=0;return this._createEncoderBuffer(out);}if(num<0x80)return this._createEncoderBuffer(num);if(num<0x100)return this._createEncoderBuffer([0,num]);let size=1;for(let i=num;i>=0x100;i>>=8)size++;const out=new Array(size);for(let i=out.length-1;i>=0;i--){out[i]=num&0xff;num>>=8;}if(out[0]&0x80){out.unshift(0);}return this._createEncoderBuffer(Buffer.from(out));};DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?0xff:0);};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')entity=entity(obj);return entity._getEncoder('der').tree;};DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){const state=this._baseState;let i;if(state['default']===null)return false;const data=dataBuffer.join();if(state.defaultBuffer===undefined)state.defaultBuffer=this._encodeValue(state['default'],reporter,parent).join();if(data.length!==state.defaultBuffer.length)return false;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return false;return true;};// Utility methods\nfunction encodeTag(tag,primitive,cls,reporter){let res;if(tag==='seqof')tag='seq';else if(tag==='setof')tag='set';if(der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else if(typeof tag==='number'&&(tag|0)===tag)res=tag;else return reporter.error('Unknown tag: '+tag);if(res>=0x1f)return reporter.error('Multi-octet tag encoding unsupported');if(!primitive)res|=0x20;res|=der.tagClassByName[cls||'universal']<<6;return res;}","map":{"version":3,"names":["inherits","require","Buffer","Node","der","DEREncoder","entity","enc","name","tree","DERNode","_init","body","module","exports","prototype","encode","data","reporter","_encode","join","parent","call","_encodeComposite","encodeComposite","tag","primitive","cls","content","encodedTag","encodeTag","length","header","alloc","_createEncoderBuffer","lenOctets","i","j","_encodeStr","encodeStr","str","unused","buf","writeUInt16BE","charCodeAt","_isNumstr","error","_isPrintstr","test","_encodeObjid","encodeObjid","id","values","relative","hasOwnProperty","split","Array","isArray","slice","JSON","stringify","splice","size","ident","objid","offset","two","num","_encodeTime","encodeTime","time","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_encodeNull","encodeNull","_encodeInt","encodeInt","isBuffer","numArray","toArray","sign","unshift","from","out","copy","_encodeBool","encodeBool","value","_use","use","obj","_getEncoder","_skipDefault","skipDefault","dataBuffer","state","_baseState","defaultBuffer","undefined","_encodeValue","res","tagByName","tagClassByName"],"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/asn1.js/lib/asn1/encoders/der.js"],"sourcesContent":["'use strict';\n\nconst inherits = require('inherits');\nconst Buffer = require('safer-buffer').Buffer;\nconst Node = require('../base/node');\n\n// Import DER constants\nconst der = require('../constants/der');\n\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\nmodule.exports = DEREncoder;\n\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  Node.call(this, 'der', parent);\n}\ninherits(DERNode, Node);\n\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\n  primitive,\n  cls,\n  content) {\n  const encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    const header = Buffer.alloc(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([ header, content ]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  let lenOctets = 1;\n  for (let i = content.length; i >= 0x100; i >>= 8)\n    lenOctets++;\n\n  const header = Buffer.alloc(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n\n  for (let i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\n    header[i] = j & 0xff;\n\n  return this._createEncoderBuffer([ header, content ]);\n};\n\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\n  } else if (tag === 'bmpstr') {\n    const buf = Buffer.alloc(str.length * 2);\n    for (let i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' +\n                                 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' +\n                                 'only latin upper and lower case letters, ' +\n                                 'digits, space, apostrophe, left and rigth ' +\n                                 'parenthesis, plus sign, comma, hyphen, ' +\n                                 'dot, slash, colon, equal sign, ' +\n                                 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag +\n                               ' unsupported');\n  }\n};\n\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values)\n      return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id))\n      return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s.]+/g);\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  }\n\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' +\n                               'got: ' + JSON.stringify(id));\n  }\n\n  if (!relative) {\n    if (id[1] >= 40)\n      return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  let size = 0;\n  for (let i = 0; i < id.length; i++) {\n    let ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7)\n      size++;\n  }\n\n  const objid = Buffer.alloc(size);\n  let offset = objid.length - 1;\n  for (let i = id.length - 1; i >= 0; i--) {\n    let ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0)\n      objid[offset--] = 0x80 | (ident & 0x7f);\n  }\n\n  return this._createEncoderBuffer(objid);\n};\n\nfunction two(num) {\n  if (num < 10)\n    return '0' + num;\n  else\n    return num;\n}\n\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  let str;\n  const date = new Date(time);\n\n  if (tag === 'gentime') {\n    str = [\n      two(date.getUTCFullYear()),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else if (tag === 'utctime') {\n    str = [\n      two(date.getUTCFullYear() % 100),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n\n  return this._encodeStr(str, 'octstr');\n};\n\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\n\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values)\n      return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' +\n                                 JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    const numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = Buffer.from(numArray);\n  }\n\n  if (Buffer.isBuffer(num)) {\n    let size = num.length;\n    if (num.length === 0)\n      size++;\n\n    const out = Buffer.alloc(size);\n    num.copy(out);\n    if (num.length === 0)\n      out[0] = 0;\n    return this._createEncoderBuffer(out);\n  }\n\n  if (num < 0x80)\n    return this._createEncoderBuffer(num);\n\n  if (num < 0x100)\n    return this._createEncoderBuffer([0, num]);\n\n  let size = 1;\n  for (let i = num; i >= 0x100; i >>= 8)\n    size++;\n\n  const out = new Array(size);\n  for (let i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if(out[0] & 0x80) {\n    out.unshift(0);\n  }\n\n  return this._createEncoderBuffer(Buffer.from(out));\n};\n\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\n\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  const state = this._baseState;\n  let i;\n  if (state['default'] === null)\n    return false;\n\n  const data = dataBuffer.join();\n  if (state.defaultBuffer === undefined)\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n\n  if (data.length !== state.defaultBuffer.length)\n    return false;\n\n  for (i=0; i < data.length; i++)\n    if (data[i] !== state.defaultBuffer[i])\n      return false;\n\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  let res;\n\n  if (tag === 'seqof')\n    tag = 'seq';\n  else if (tag === 'setof')\n    tag = 'set';\n\n  if (der.tagByName.hasOwnProperty(tag))\n    res = der.tagByName[tag];\n  else if (typeof tag === 'number' && (tag | 0) === tag)\n    res = tag;\n  else\n    return reporter.error('Unknown tag: ' + tag);\n\n  if (res >= 0x1f)\n    return reporter.error('Multi-octet tag encoding unsupported');\n\n  if (!primitive)\n    res |= 0x20;\n\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\n\n  return res;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}