{"ast":null,"code":"'use strict';var assert=require('minimalistic-assert');function Cipher(options){this.options=options;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0;}module.exports=Cipher;Cipher.prototype._init=function _init(){// Might be overrided\n};Cipher.prototype.update=function update(data){if(data.length===0)return[];if(this.type==='decrypt')return this._updateDecrypt(data);else return this._updateEncrypt(data);};Cipher.prototype._buffer=function _buffer(data,off){// Append data to buffer\nvar min=Math.min(this.buffer.length-this.bufferOff,data.length-off);for(var i=0;i<min;i++)this.buffer[this.bufferOff+i]=data[off+i];this.bufferOff+=min;// Shift next\nreturn min;};Cipher.prototype._flushBuffer=function _flushBuffer(out,off){this._update(this.buffer,0,out,off);this.bufferOff=0;return this.blockSize;};Cipher.prototype._updateEncrypt=function _updateEncrypt(data){var inputOff=0;var outputOff=0;var count=(this.bufferOff+data.length)/this.blockSize|0;var out=new Array(count*this.blockSize);if(this.bufferOff!==0){inputOff+=this._buffer(data,inputOff);if(this.bufferOff===this.buffer.length)outputOff+=this._flushBuffer(out,outputOff);}// Write blocks\nvar max=data.length-(data.length-inputOff)%this.blockSize;for(;inputOff<max;inputOff+=this.blockSize){this._update(data,inputOff,out,outputOff);outputOff+=this.blockSize;}// Queue rest\nfor(;inputOff<data.length;inputOff++,this.bufferOff++)this.buffer[this.bufferOff]=data[inputOff];return out;};Cipher.prototype._updateDecrypt=function _updateDecrypt(data){var inputOff=0;var outputOff=0;var count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1;var out=new Array(count*this.blockSize);// TODO(indutny): optimize it, this is far from optimal\nfor(;count>0;count--){inputOff+=this._buffer(data,inputOff);outputOff+=this._flushBuffer(out,outputOff);}// Buffer rest of the input\ninputOff+=this._buffer(data,inputOff);return out;};Cipher.prototype.final=function final(buffer){var first;if(buffer)first=this.update(buffer);var last;if(this.type==='encrypt')last=this._finalEncrypt();else last=this._finalDecrypt();if(first)return first.concat(last);else return last;};Cipher.prototype._pad=function _pad(buffer,off){if(off===0)return false;while(off<buffer.length)buffer[off++]=0;return true;};Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=new Array(this.blockSize);this._update(this.buffer,0,out,0);return out;};Cipher.prototype._unpad=function _unpad(buffer){return buffer;};Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,'Not enough data to decrypt');var out=new Array(this.blockSize);this._flushBuffer(out,0);return this._unpad(out);};","map":{"version":3,"names":["assert","require","Cipher","options","type","blockSize","_init","buffer","Array","bufferOff","module","exports","prototype","update","data","length","_updateDecrypt","_updateEncrypt","_buffer","off","min","Math","i","_flushBuffer","out","_update","inputOff","outputOff","count","max","ceil","final","first","last","_finalEncrypt","_finalDecrypt","concat","_pad","_unpad","equal"],"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/des.js/lib/des/cipher.js"],"sourcesContent":["'use strict';\n\nvar assert = require('minimalistic-assert');\n\nfunction Cipher(options) {\n  this.options = options;\n\n  this.type = this.options.type;\n  this.blockSize = 8;\n  this._init();\n\n  this.buffer = new Array(this.blockSize);\n  this.bufferOff = 0;\n}\nmodule.exports = Cipher;\n\nCipher.prototype._init = function _init() {\n  // Might be overrided\n};\n\nCipher.prototype.update = function update(data) {\n  if (data.length === 0)\n    return [];\n\n  if (this.type === 'decrypt')\n    return this._updateDecrypt(data);\n  else\n    return this._updateEncrypt(data);\n};\n\nCipher.prototype._buffer = function _buffer(data, off) {\n  // Append data to buffer\n  var min = Math.min(this.buffer.length - this.bufferOff, data.length - off);\n  for (var i = 0; i < min; i++)\n    this.buffer[this.bufferOff + i] = data[off + i];\n  this.bufferOff += min;\n\n  // Shift next\n  return min;\n};\n\nCipher.prototype._flushBuffer = function _flushBuffer(out, off) {\n  this._update(this.buffer, 0, out, off);\n  this.bufferOff = 0;\n  return this.blockSize;\n};\n\nCipher.prototype._updateEncrypt = function _updateEncrypt(data) {\n  var inputOff = 0;\n  var outputOff = 0;\n\n  var count = ((this.bufferOff + data.length) / this.blockSize) | 0;\n  var out = new Array(count * this.blockSize);\n\n  if (this.bufferOff !== 0) {\n    inputOff += this._buffer(data, inputOff);\n\n    if (this.bufferOff === this.buffer.length)\n      outputOff += this._flushBuffer(out, outputOff);\n  }\n\n  // Write blocks\n  var max = data.length - ((data.length - inputOff) % this.blockSize);\n  for (; inputOff < max; inputOff += this.blockSize) {\n    this._update(data, inputOff, out, outputOff);\n    outputOff += this.blockSize;\n  }\n\n  // Queue rest\n  for (; inputOff < data.length; inputOff++, this.bufferOff++)\n    this.buffer[this.bufferOff] = data[inputOff];\n\n  return out;\n};\n\nCipher.prototype._updateDecrypt = function _updateDecrypt(data) {\n  var inputOff = 0;\n  var outputOff = 0;\n\n  var count = Math.ceil((this.bufferOff + data.length) / this.blockSize) - 1;\n  var out = new Array(count * this.blockSize);\n\n  // TODO(indutny): optimize it, this is far from optimal\n  for (; count > 0; count--) {\n    inputOff += this._buffer(data, inputOff);\n    outputOff += this._flushBuffer(out, outputOff);\n  }\n\n  // Buffer rest of the input\n  inputOff += this._buffer(data, inputOff);\n\n  return out;\n};\n\nCipher.prototype.final = function final(buffer) {\n  var first;\n  if (buffer)\n    first = this.update(buffer);\n\n  var last;\n  if (this.type === 'encrypt')\n    last = this._finalEncrypt();\n  else\n    last = this._finalDecrypt();\n\n  if (first)\n    return first.concat(last);\n  else\n    return last;\n};\n\nCipher.prototype._pad = function _pad(buffer, off) {\n  if (off === 0)\n    return false;\n\n  while (off < buffer.length)\n    buffer[off++] = 0;\n\n  return true;\n};\n\nCipher.prototype._finalEncrypt = function _finalEncrypt() {\n  if (!this._pad(this.buffer, this.bufferOff))\n    return [];\n\n  var out = new Array(this.blockSize);\n  this._update(this.buffer, 0, out, 0);\n  return out;\n};\n\nCipher.prototype._unpad = function _unpad(buffer) {\n  return buffer;\n};\n\nCipher.prototype._finalDecrypt = function _finalDecrypt() {\n  assert.equal(this.bufferOff, this.blockSize, 'Not enough data to decrypt');\n  var out = new Array(this.blockSize);\n  this._flushBuffer(out, 0);\n\n  return this._unpad(out);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}