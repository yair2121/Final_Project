{"ast":null,"code":"// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';var eos;function once(callback){var called=false;return function(){if(called)return;called=true;callback.apply(void 0,arguments);};}var _require$codes=require('../../../errors').codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){// Rethrow the error if it exists to avoid swallowing it\nif(err)throw err;}function isRequest(stream){return stream.setHeader&&typeof stream.abort==='function';}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on('close',function(){closed=true;});if(eos===undefined)eos=require('./end-of-stream');eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback();});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;// request.destroy just do .end - .abort is what we want\nif(isRequest(stream))return stream.abort();if(typeof stream.destroy==='function')return stream.destroy();callback(err||new ERR_STREAM_DESTROYED('pipe'));};}function call(fn){fn();}function pipe(from,to){return from.pipe(to);}function popCallback(streams){if(!streams.length)return noop;if(typeof streams[streams.length-1]!=='function')return noop;return streams.pop();}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++){streams[_key]=arguments[_key];}var callback=popCallback(streams);if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2){throw new ERR_MISSING_ARGS('streams');}var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error);});});return streams.reduce(pipe);}module.exports=pipeline;","map":{"version":3,"names":["eos","once","callback","called","apply","arguments","_require$codes","require","codes","ERR_MISSING_ARGS","ERR_STREAM_DESTROYED","noop","err","isRequest","stream","setHeader","abort","destroyer","reading","writing","closed","on","undefined","readable","writable","destroyed","destroy","call","fn","pipe","from","to","popCallback","streams","length","pop","pipeline","_len","Array","_key","isArray","error","destroys","map","i","forEach","reduce","module","exports"],"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/pipeline.js"],"sourcesContent":["// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = require('../../../errors').codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;"],"mappings":"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"},"metadata":{},"sourceType":"script"}